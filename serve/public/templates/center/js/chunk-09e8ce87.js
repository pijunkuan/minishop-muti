(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09e8ce87"],{3079:function(t,e,a){},3120:function(t,e,a){"use strict";var i=a("3079"),n=a.n(i);n.a},"5e24":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var i=a("b775");function n(t){return Object(i["a"])({url:"dashboard/"+t,method:"get"})}},"685c":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s}));var i=a("b775");function n(t){return Object(i["a"])({url:"image",method:"get",params:t})}function s(t){return Object(i["a"])({url:"image/"+t,method:"delete"})}},"8ed0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"image-button"},[a("div",{staticStyle:{width:"100px"}},[a("el-upload",{staticClass:"avatar-uploader upload-btn",attrs:{headers:{Authorization:"Bearer "+t.$store.getters.token},action:"//"+t.$store.getters.shop_url+"."+t.$store.getters.shop_host+"/api/center/image",name:"file","before-upload":t.beforeUpload,"show-file-list":!1,"on-success":t.successUpload}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("新增图片")])],1)],1),a("div",{staticClass:"image-space",staticStyle:{width:"calc(100% - 100px)"}},[a("span",[t._v("图片空间：共 "),a("strong",[t._v(t._s(t.image.count)+" ")]),t._v("张图片，已使用"),a("strong",[t._v(" "+t._s(t.image.bytes_value)+" ")]),t._v(" / 总大小"),a("strong",[t._v(" "+t._s(t.$store.getters.shop_img_limit)+" GB")])])])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"background-color":"#fff",padding:"10px","border-radius":"5px"}},[a("div",{staticStyle:{"min-height":"500px"}},t._l(t.images,(function(e,i){return a("div",{key:i,staticClass:"image-list-item",staticStyle:{position:"relative"},on:{mouseenter:function(e){t.activeIndex=i},mouseleave:function(e){t.activeIndex=null}}},[a("div",{staticClass:"image-edit-button",class:{"is-active":t.activeIndex===i}},[a("span",{staticStyle:{width:"20px","padding-right":"5px","text-align":"right",cursor:"pointer"},on:{click:function(a){return t.imgDelete(e)}}},[a("i",{staticClass:"iconfont iconshanchu1"})])]),a("el-image",{staticClass:"image-content",staticStyle:{width:"180px",height:"180px"},attrs:{src:e.url,fit:"scale-down"}}),a("div",[t._v(t._s(e.name))])],1)})),0),a("el-pagination",{staticStyle:{"text-align":"center","margin-top":"20px"},attrs:{"current-page":t.query.page,"page-size":t.query.pageSize,total:t.total,layout:"total, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange}})],1)])},n=[],s=a("685c"),o=a("5e24"),c={data:function(){return{loading:!1,images:[],query:{page:1,pageSize:15},total:0,activeIndex:null,image:{bytes_value:0,count:0}}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.loading=!0,Object(s["b"])(this.query).then((function(e){t.images=e.data.body.data,t.total=e.data.body.page.total,t.loading=!1})).catch((function(){t.loading=!1})),Object(o["a"])("image").then((function(e){t.image.bytes_value=e.data.body.bytes_value,t.image.count=e.data.body.count}))},handleCurrentChange:function(t){this.query.page=t,this.getData()},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传图片只能是 JPG 格式 或 PNG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),e&&a},successUpload:function(){this.$message.success("上传成功"),this.getData()},imgDelete:function(t){var e=this;this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){Object(s["a"])(t.id).then((function(){e.$message.success("已成功删除"),e.getData()})).catch((function(){}))})).catch((function(){}))}}},r=c,u=(a("3120"),a("2877")),l=Object(u["a"])(r,i,n,!1,null,"2179477a",null);e["default"]=l.exports}}]);